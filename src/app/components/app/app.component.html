<ng-container *transloco="let t; prefix: 'jet-app'">
  @let _languageOption = languageOption();
  <mat-sidenav-container
    class="jet-sidenav-container"
    [dir]="_languageOption.directionality"
  >
    @let _isSmallViewport = isSmallViewport();
    <mat-sidenav
      class="jet-sidenav"
      #matSidenav
      [mode]="_isSmallViewport ? 'over' : 'side'"
      [opened]="!_isSmallViewport"
      fixedInViewport
    >
      <jet-sidenav
        [activeNavigationMenuItemPath]="activeNavigationMenuItemPath"
        [isSmallViewport]="_isSmallViewport"
        [matSidenav]="matSidenav"
      ></jet-sidenav>
    </mat-sidenav>
    <mat-sidenav-content class="jet-sidenav-content">
      <jet-toolbar
        [isSmallViewport]="_isSmallViewport"
        [matSidenav]="matSidenav"
      ></jet-toolbar>
      <mat-tab-nav-panel #tabPanel>
        <main
          [class]="{
            'jet-add-safe-area':
              matSidenav.mode === 'over' ? true : !matSidenav.opened,
          }"
        >
          <router-outlet />
        </main>
      </mat-tab-nav-panel>
      <footer
        [class]="{
          'jet-add-bottom-margin': _isSmallViewport,
          'jet-add-safe-area':
            matSidenav.mode === 'over' ? true : !matSidenav.opened,
        }"
      >
        <jet-footer></jet-footer>
      </footer>
      @if (_isSmallViewport) {
        <nav
          class="jet-tab-nav-bar"
          [tabPanel]="tabPanel"
          backgroundColor="primary"
          mat-tab-nav-bar
        >
          @for (
            navigationMenuItem of navigationMenuItems;
            track navigationMenuItem.path
          ) {
            <a
              [active]="
                activeNavigationMenuItemPath === navigationMenuItem.path
              "
              [attr.aria-label]="navigationMenuItem.nameKey | transloco"
              [routerLink]="[navigationMenuItem.path]"
              mat-tab-link
            >
              <mat-icon>{{ navigationMenuItem.icon }}</mat-icon>
            </a>
          }
        </nav>
      }
    </mat-sidenav-content>
  </mat-sidenav-container>
</ng-container>
